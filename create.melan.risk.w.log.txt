38838   /******************************************************************
38839   #      NIH-AARP UVR- Reproductive Factors- Melanoma Study
38840   *******************************************************************
38841   #
38842   # creates the melanoma file with cancer, smoking,
38843   # reproductive, hormonal, contraceptives, UVR variables
38844   # !!!! for risk factors dataset !!!!!
38845   #
38846   # uses the uv_public, rout09jan14, rexp16feb15 datasets
38847   # note: using new rexp dataset above
38848   #
38849   # Created: April 03 2015
38850   # Updated: v20150410 WTL
38851   # Used IMS: anchovy
38852   # Warning: original IMS datasets are in LINUX latin1 encoding
38853   *******************************************************************/
38854
38855   ods html close;
38856   ods html;
NOTE: Writing HTML Body file: sashtml134.htm
38857   options nocenter yearcutoff=1900 errors=1;
38858   title1 'NIH-AARP UVR Melanoma Study _riskfactor';
38859
38860   libname uvr 'C:\REB\AARP_HRTandMelanoma\Data\anchovy';
NOTE: Libref UVR was successfully assigned as follows:
      Engine:        V9
      Physical Name: C:\REB\AARP_HRTandMelanoma\Data\anchovy
38861   libname conv 'C:\REB\AARP_HRTandMelanoma\Data\converted';
NOTE: Libname CONV refers to the same physical library as ANALYSIS.
NOTE: Libref CONV was successfully assigned as follows:
      Engine:        V9
      Physical Name: C:\REB\AARP_HRTandMelanoma\Data\converted
38862
38863   filename uv_pub 'C:\REB\AARP_HRTandMelanoma\Data\anchovy\uv_public.v9x';
38864
38865   ** import the UVR with file extension v9x from the anchovy folder;
38866   proc cimport data=uv_pub1 infile=uv_pub;
38867   run;

NOTE: PROC CIMPORT begins to create/update data set WORK.uv_pub1
NOTE: Data set contains 38 variables and 566398 observations.
      Logical record length is 304

NOTE: PROCEDURE CIMPORT used (Total process time):
      real time           1.40 seconds
      cpu time            1.38 seconds


38868   /***************************************************/
38869   ** use baseline census tract for higher resolution;
38870   proc means data=uv_pub1;
38871       title "Comparing UVR exposure means";
38872       var exposure_jul_78_93 exposure_jul_96_05 exposure_jul_78_05;
38873       var exposure_net_78_93 exposure_net_96_05 exposure_net_78_05;
38874   run;

NOTE: There were 566398 observations read from the data set WORK.UV_PUB1.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.18 seconds
      cpu time            0.51 seconds


38875
38876   ** keep the july UVR data only;
38877   data conv.uv_pub1;
38878       set uv_pub1;
38879       keep    westatid
38880               exposure_jul_78_05;
38881   run;

NOTE: There were 566398 observations read from the data set WORK.UV_PUB1.
NOTE: The data set CONV.UV_PUB1 has 566398 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.11 seconds
      cpu time            0.12 seconds


38882   ods html close;
38883   ods html;
NOTE: Writing HTML Body file: sashtml135.htm
38884   proc contents data=conv.rout09jan14;
38885       title 'risk outcomes check';
38886   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.44 seconds
      cpu time            0.21 seconds


38887   ods html close;
38888   ods html;
NOTE: Writing HTML Body file: sashtml136.htm
38889   ** input: first primary cancer _risk;
38890   ** output: ranalysis;
38891   ** uses: rexp05jun14, rout09jan14, uv_pub1 (merged later);
38892   ** riskfactor dataset;
38893   * %include
38893 ! 'C:\REB\AARP_HRTandMelanoma\Analysis\anchovy\first.primary.analysis.risk.include.sas';
38894   data ranalysis;
38895     merge conv.rout09jan14 (in=ino)
38896           conv.rexp05jun14 (in=ine);
38897     by westatid;
38898     keep      westatid
38899               rf_entry_dt
38900               rf_entry_age
38901               f_dob
38902               AGECAT
38903               racem /* for race exclusions */
38904               SEX
38905               raadate /* date moved outside of Registry Ascertainment Area */
38906               entry_age
38907               entry_dt
38908               cancer
38909               cancer_dxdt
38910               cancer_seergroup
38911               cancer_ss_stg /* summary stage: first cancer */
38912               cancer_behv /* for cancer staging */
38913               cancer_siterec3
38914               cancer_grade
38915               skincan
38916               skin_dxdt
38917
38918               /* for self reported cancers */
38919               self_prostate
38920               self_breast
38921               self_colon
38922               self_other
38923
38924               health
38925               renal
38926               DODSource
38927               DOD
38928               EDUCM
38929               fl_proxy /* for proxy responder exclusions */
38930
38931               /* smoking */
38932               smoke_former
38933               smoke_quit
38934               smoke_dose
38935               smoke_quit_dose
38936
38937               BF_COMB_SELF_CANCER
38938               BF_HORMEVER
38939               BF_HORMTYPE
38940               BF_SMOKE_EVER
38941               BF_SMOKE_FORMER
38942
38943               /* estrogen & progestin with cutoff at 2002, prior to follow up questionnaire
38943 ! FUQ */
38944               DAUGH_ESTONLY_CALC_MO_2002      /* Duration of estrogen-only pill use (in
38944 ! months) */
38945               DAUGH_ESTPRG_CALC_MO_2002       /* Duration of combined estrogen & progestin
38945 ! pill use (in months)  */
38946               DAUGH_EST_CALC_MO_2002          /* Duration of overall estrogen pill use (in
38946 ! months)  */
38947               DAUGH_PRGONLY_CALC_MO_2002      /* Duration of progestin-only pill use (in
38947 ! months)  */
38948               DAUGH_PRG_CALC_MO_2002          /* Duration of overall progestin pill use (in
38948 ! months)  */
38949               FMENSTR                         /* Age at menarche */
38950               HORMEVER                        /* Did participant ever take female hormones
38950 ! pills? */
38951               HORMSTAT                        /* Hormone Status */
38952               HORM_CUR                        /* Currently taking replacement hormones? */
38953               HORM_YRS                        /* Total years used replacement hormones */
38954
38955               /** follow up reproductive factors
38956               FUQ_ESTPRG
38957               FUQ_ESTPRG_BRAND
38958               FUQ_ESTPRG_CUR
38959               FUQ_ESTPRG_DUR
38960               FUQ_ESTPRG_STOP
38961               FUQ_ESTROGEN
38962               FUQ_EST_BRAND
38963               FUQ_EST_CUR
38964               FUQ_EST_DUR
38965               FUQ_EST_STOP
38966               FUQ_EVER_BBD
38967               FUQ_EVER_MAMMOGRAM
38968               FUQ_HORMEVER
38969               FUQ_HORMONES
38970               **/
38971
38972               LACEY_NATL_MENO
38973               AGE_FLB                 /* age at first live birth */
38974               LIVECHILD
38975               MARRIAGE
38976               MENOP_AGE               /* menopause age */
38977               MENOSTAT
38978               ORALBC_YRS
38979               PERSTOP_MENOP
38980               PERSTOP_NOSTOP
38981               PERSTOP_RADCHEM
38982               PERSTOP_SURG            /* surgical menopause? */
38983               hyststat
38984               ovarystat
38985               rel_1d_cancer           /* family history of cancer - any 1st degree relatives
38985 !  ever diagnosed with cancer (nnmsc)*/
38986
38987
38988               /* add more variables here */
38989               BMI_CUR                 /* current bmi kg/m2*/
38990               qp12b                   /* coffee drinking */
38991               calories                /* calories consumed */
38992               Q45                     /* pipe-cigar smoking */
38993               Q32                     /* current physical activity */
38994               physic                  /* physical activity >=20 min in past 12 months */
38995               physic_1518             /* physical activity >=20 min in past 12 months during
38995 !  ages 15-18 */
38996               mped_a_bev              /* total alcohol per day including food sources */
38997
38998           /******** riskfactor characteristics variables ********/
38999               rf_agecat
39000               rf_phys_modvig_15_18
39001               rf_phys_modvig_curr
39002               rf_1d_cancer
39003               /* necessary for exclusions */
39004               fl_rf_proxy
39005               rf_q23_2_1a
39006               rf_q23_2_2a
39007
39008               /** hormone variables ******/
39009               /** RF_ESTNAME_ESTRACE RF_ESTNAME_ESTRATAB RF_ESTNAME_OGEN
39010               RF_ESTNAME_OTHER RF_ESTNAME_PREMARIN RF_ESTNAME_UNSURE**/
39011               RF_ESTROGEN                     /* est ever y/n */
39012               RF_EST_CUR                      /* est current y/n */
39013               RF_EST_DUR                      /* est years taken */
39014               RF_EST_CALC_MO                  /* est overall duration taken */
39015               RF_ESTONLY_CALC_MO              /* est only overall duration taken */
39016               RF_EST_DOSE                     /* est dose taken */
39017               RF_EST_FREQ                     /* est frequency taken */
39018               RF_EST_DATEFLAG                 /* est start and stop date (intact) indicator
39018 ! */
39019               RF_EST_START_DT RF_EST_STOP_DT  /* est start and end dates */
39020
39021               RF_ESTPRG_CALC_MO               /* est&prog overall duration taken */
39022
39023               /** RF_PRGNAME_CYCRIN RF_PRGNAME_MEDRO RF_PRGNAME_OTHER RF_PRGNAME_PROVERA
39024               RF_PRGNAME_UNSURE**/
39025               RF_PROGESTIN                    /* prog ever y/n */
39026               RF_PRG_CUR                      /* prog current y/n */
39027               RF_PRG_DUR                      /* prog years taken */
39028               RF_PRG_CALC_MO                  /* prog overall duration taken */
39029               RF_PRGONLY_CALC_MO              /* prog only overall duration taken */
39030               RF_PRG_DOSE                     /* prog dose taken */
39031               RF_PRG_FREQ                     /* prog frequency taken */
39032               RF_PRG_DATEFLAG                 /* prog start and stop date (intact) indicator
39032 !  */
39033               RF_PRG_START_DT RF_PRG_STOP_DT  /* prog start and end dates */
39034       ;
39035       format skin_dxdt dod raadate f_dob entry_dt rf_entry_dt Date9.;
39036   run;

NOTE: There were 334905 observations read from the data set CONV.ROUT09JAN14.
NOTE: There were 334905 observations read from the data set CONV.REXP05JUN14.
NOTE: The data set WORK.RANALYSIS has 334905 observations and 98 variables.
NOTE: DATA statement used (Total process time):
      real time           9.77 seconds
      cpu time            9.76 seconds


39037
39038   ** create exit dates, exit ages, person years and rf_person years;
39039   ** and recode coffee drinking;
39040   data ranalysis;
39041       set ranalysis;
39042       ****  Create exit date, exit age, and person years for First Primary Cancer;
39043       ** with first primary cancer as skin cancer;
39044       * Chooses the earliest of 4 possible exit dates for skin cancer;
39045       exit_dt = min(mdy(12,31,2006), skin_dxdt, dod, raadate);
39046       exit_age = round(((exit_dt-f_dob)/365.25),.001);
39047       personyrs = round(((exit_dt-entry_dt)/365.25),.001);
39048       rf_personyrs = round(((exit_dt-rf_entry_dt)/365.25),.001);
39049
39050       ** coffee drinking;
39051       coffee_c=.;
39052
39053       if      qp12b='0'                           then coffee_c=0;    /* none */
39054       else if qp12b in ('1','2','3','4','5','6')  then coffee_c=1;    /* <=1/day */
39055       else if qp12b='7'                           then coffee_c=2;    /* 2-3/day */
39056       else if qp12b in ('8','9')                  then coffee_c=3;    /* >=4/day */
39057       else if qp12b='M' or qp12b='E'              then coffee_c=-9;   /* missing */
39058       else    coffee_c=-9;                                            /* missing */
39059
39060       format exit_dt Date9.;
39061
39062       label   exit_dt="Exit Date"
39063               exit_age="Exit Age"
39064               personyrs="Person Years from Baseline"
39065               rf_personyrs="Person Years from Riskfactor";
39066   run;

NOTE: There were 334905 observations read from the data set WORK.RANALYSIS.
NOTE: The data set WORK.RANALYSIS has 334905 observations and 103 variables.
NOTE: DATA statement used (Total process time):
      real time           0.52 seconds
      cpu time            0.51 seconds


39067   /* check point for merging the exposure and outcome data */
39068   ** copy and save the analysis_use dataset to the converted folder;
39069   proc copy noclone in=Work out=conv;
39070       select ranalysis;
39071   run;

NOTE: Copying WORK.RANALYSIS to CONV.RANALYSIS (memtype=DATA).
NOTE: System Options for BUFSIZE and REUSE were used at user's request.
NOTE: Libname and/or system options for compress, pointobs, data representation and encoding
      attributes were used at user's request.
NOTE: There were 334905 observations read from the data set WORK.RANALYSIS.
NOTE: The data set CONV.RANALYSIS has 334905 observations and 103 variables.
NOTE: PROCEDURE COPY used (Total process time):
      real time           0.32 seconds
      cpu time            0.31 seconds


39072   ods html close;
39073   ods html;
NOTE: Writing HTML Body file: sashtml137.htm
39074   proc contents data=conv.ranalysis;
39075       title 'ranalysis variables';
39076   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds


39077   proc print data=conv.ranalysis (obs=10);
39078       title 'ranalysis observations';
39079       var entry_dt exit_dt raadate skin_dxdt f_dob rf_entry_dt personyrs rf_personyrs;
39080   run;

NOTE: There were 10 observations read from the data set CONV.RANALYSIS.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.19 seconds
      cpu time            0.01 seconds


39081   proc means data=conv.ranalysis;
39082       title 'check creation of ranalysis variables';
39083       var skin_dxdt dod raadate f_dob entry_dt rf_entry_dt
39084           entry_age rf_entry_age
39085           exit_dt exit_age personyrs rf_personyrs;
39086   run;

NOTE: There were 334905 observations read from the data set CONV.RANALYSIS.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.32 seconds
      cpu time            0.67 seconds


39087
39088   proc freq data=conv.ranalysis;
39089       title 'check coffee variable';
39090       table qp12b;
39091   run;

NOTE: There were 334905 observations read from the data set CONV.RANALYSIS.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.25 seconds
      cpu time            0.18 seconds


39092
39093   ** set value formats ;
39094   proc format;
39095       value sexfmt 0 = 'Male' 1 = 'Female';
NOTE: Format SEXFMT is already on the library.
NOTE: Format SEXFMT has been output.
39096       value melanfmt 0 = 'no melanoma' 1 = 'in situ melanoma' 2 = 'malignant melanoma';
NOTE: Format MELANFMT is already on the library.
NOTE: Format MELANFMT has been output.
39097       value melanomafmt 0 = 'no melanoma' 1 = 'melanoma';
NOTE: Format MELANOMAFMT is already on the library.
NOTE: Format MELANOMAFMT has been output.
39098       value agecatfmt 1 = '<55 years' 2 = '55-59 years' 3 = '60-64 years' 4 = '65-69 years'
39098 ! 5 = '>=70 years';
NOTE: Format AGECATFMT is already on the library.
NOTE: Format AGECATFMT has been output.
39099       value racefmt -9='missing' 0='non-Hispanic white' 1='non-Hispanic black' 2='Hispanic,
39099 ! Asian, PI, AIAN';
NOTE: Format RACEFMT is already on the library.
NOTE: Format RACEFMT has been output.
39100       value educfmt -9='missing' 0='highschool or less' 1='some college' 2='college or
39100 ! graduate school';
NOTE: Format EDUCFMT is already on the library.
NOTE: Format EDUCFMT has been output.
39101       value bmifmt -9='missing' 1='18.5 to 25' 2='25 to 30' 3='30 to 35' 4='35 to 40'
39101 ! 5='>=40';
NOTE: Format BMIFMT is already on the library.
NOTE: Format BMIFMT has been output.
39102       value physicfmt -9='missing' 0='rarely' 1='1-3 per month' 2='1-2 per week' 3='3-4 per
39102 ! week' 4='5+ per week';
NOTE: Format PHYSICFMT is already on the library.
NOTE: Format PHYSICFMT has been output.
39103       value smokingfmt -9='missing' 0='never smoked' 1='ever smoke';
NOTE: Format SMOKINGFMT is already on the library.
NOTE: Format SMOKINGFMT has been output.
39104
39105       ** menopause status recoded;
39106       value fmenstrfmt 9='missing' 1='<=10' 2='11-12' 3='13-14' 4='>=15';
NOTE: Format FMENSTRFMT is already on the library.
NOTE: Format FMENSTRFMT has been output.
39107       value menostatfmt -9='missing' 0='pre-menopausal' 1='natural menopause'
39107 ! 2='hysterectomy, both ovaries removed'
39108                           3='hysterectomy, other ovary surgery' 4='hysterectomy, both
39108 ! ovaries intact'
39109                           5='hysterectomy, ovaries unknown' 6='other reason';
NOTE: Format MENOSTATFMT is already on the library.
NOTE: Format MENOSTATFMT has been output.
39110       value menoagefmt -9='missing' 1='<45' 2='45-49' 0='50-54' 3='55+';
NOTE: Format MENOAGEFMT is already on the library.
NOTE: Format MENOAGEFMT has been output.
39111       value hystagefmt -9='missing' 0='<45' 1='45-49' 2='50-54' 3='55+';
NOTE: Format HYSTAGEFMT is already on the library.
NOTE: Format HYSTAGEFMT has been output.
39112       value flbagefmt -9='missing' 1='< 20 years old' 2='20s' 3='30s';
NOTE: Format FLBAGEFMT is already on the library.
NOTE: Format FLBAGEFMT has been output.
39113       value parityfmt -9='missing' 0='nulliparous' 1='1-2 live children' 2='3-4 live
39113 ! children' 3='5+ live children';
NOTE: Format PARITYFMT is already on the library.
NOTE: Format PARITYFMT has been output.
39114       value hormstatfmt -9='missing' 0='never' 1='former' 2='current';
NOTE: Format HORMSTATFMT is already on the library.
NOTE: Format HORMSTATFMT has been output.
39115       value oralbcdurfmt -9='missing' 0='none' 1='1-4 years' 2='5-9 years' 3='10+ years';
NOTE: Format ORALBCDURFMT is already on the library.
NOTE: Format ORALBCDURFMT has been output.
39116       value uvrqfmt -9='missing' 1='0 to 186.255' 2='186.255 to 215.622' 3='215.622 to
39116 ! 245.151'
39117                       4='245.151 to 257.14' 5='>257.14';
NOTE: Format UVRQFMT is already on the library.
NOTE: Format UVRQFMT has been output.
39118       value relativefmt 9='missing' 0='No' 1='Yes';
NOTE: Format RELATIVEFMT is already on the library.
NOTE: Format RELATIVEFMT has been output.
39119   /* :::risk factors::: */
39120       ** smoking;
39121       value smokeformerfmt 9='missing' 0='never smoked' 1='former smoker' 2='current smoker'
39121 ! ;
NOTE: Format SMOKEFORMERFMT is already on the library.
NOTE: Format SMOKEFORMERFMT has been output.
39122       value smokequitfmt 9='missing' 0='never smoked' 1='stopped 10+ years ago' 2='stopped
39122 ! 5-9 years ago'
39123                           3='stopped 1-4 years ago' 4='stopped within last year'
39123 ! 5='currently smoking';
NOTE: Format SMOKEQUITFMT is already on the library.
NOTE: Format SMOKEQUITFMT has been output.
39124       value smokedosefmt 9='missing' 0='never smoked' 1='1-10 cigs a day' 2='11-20 cigs a
39124 ! day' 3='21=30 cigs a day'
39125                           4='31-40 cigs a day' 5='41-60 cigs a day' 6='60+ cigs a day';
NOTE: Format SMOKEDOSEFMT is already on the library.
NOTE: Format SMOKEDOSEFMT has been output.
39126       value smokequitdosefmt 9='missing' 0='never smoked' 1='quit, <=20 cigs/day' 2='quit,
39126 ! >20 cigs/day'
39127                               3='currently smoking, <=20 cigs/day' 4='currently smoking, >20
39127 !  cigs/day';
NOTE: Format SMOKEQUITDOSEFMT is already on the library.
NOTE: Format SMOKEQUITDOSEFMT has been output.
39128       value coffeefmt -9='missing' 0='none' 1='<=1 cup/day' 2='2-3 cups/day' 3='>=4
39128 ! cups/day';
NOTE: Format COFFEEFMT is already on the library.
NOTE: Format COFFEEFMT has been output.
39129       value etohfmt -9='missing' 0='0' 1='>0 to 0.04' 2='>0.04 to 0.1' 3='>0.1 to 0.52'
39129 ! 4='>0.52 to 1.12' 5='>1.12';
NOTE: Format ETOHFMT is already on the library.
NOTE: Format ETOHFMT has been output.
39130       value rfphysicfmt -9='missing' 0='never-rarely' 1='<1 hr/week' 2='1-3 hr/week' 3='4-7
39130 ! hr/week' 4='>7 hr/week';
NOTE: Format RFPHYSICFMT is already on the library.
NOTE: Format RFPHYSICFMT has been output.
39131
39132   run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds


39133
39134   ** uses the pre-created analysis_use from above checkpoint;
39135   data melan_r; ** name the output of the first primary analysis include to melan_r;
39136       set conv.ranalysis;
39137       ****** Define melanoma - pulled from allcancer-coffee analysis ******;
39138       ** create the melanoma case variable from the cancer ICD-O-3 and SEER coding of 25010;
39139       ** contains both melanoma subtypes;
39140       melanoma_c = .;
39141       * in situ melanoma =1;
39142       if cancer_behv='2' and cancer_seergroup = 18 and cancer_siterec3=25010
39143           then melanoma_c = 1;
39144       * malignant melanoma =2;
39145       else if cancer_behv='3' and cancer_seergroup = 18 and cancer_siterec3=25010
39146           then melanoma_c = 2;
39147       else melanoma_c = 0;
39148
39149       ** create melanoma indicator Y/N;
39150       melanoma_agg = .;
39151       * melanoma including in situ and malignant;
39152       if (cancer_behv='2' or cancer_behv='3') and cancer_seergroup=18 and
39152 ! cancer_siterec3=25010
39153           then melanoma_agg = 1;
39154       else melanoma_agg = 0;
39155   run;

NOTE: There were 334905 observations read from the data set CONV.RANALYSIS.
NOTE: The data set WORK.MELAN_R has 334905 observations and 105 variables.
NOTE: DATA statement used (Total process time):
      real time           0.60 seconds
      cpu time            0.57 seconds


39156
39157   *******************************************************;
39158   /* Check for exclusions from Loftfield Coffee paper;
39159   ** total of n=566398;
39160   proc copy noclone in=Work out=conv;
39161       select analysis;
39162   run;
39163   */
39164   *******************************************************;
39165
39166   ods html close;
39167   ods html;
NOTE: Writing HTML Body file: sashtml138.htm
39168
39169   ** merge the melan_r dataset with the UV data;
39170   data melan_r;
39171       merge melan_r (in=frodo) conv.uv_pub1 ;
39172       by westatid;
39173       if frodo;
39174   run;

NOTE: There were 334905 observations read from the data set WORK.MELAN_R.
NOTE: There were 566398 observations read from the data set CONV.UV_PUB1.
NOTE: The data set WORK.MELAN_R has 334905 observations and 106 variables.
NOTE: DATA statement used (Total process time):
      real time           0.58 seconds
      cpu time            0.59 seconds


39175
39176   ** copy and save the melan dataset to the converted folder;
39177   proc copy noclone in=Work out=conv;
39178       select melan_r;
39179   run;

NOTE: Copying WORK.MELAN_R to CONV.MELAN_R (memtype=DATA).
NOTE: System Options for BUFSIZE and REUSE were used at user's request.
NOTE: Libname and/or system options for compress, pointobs, data representation and encoding
      attributes were used at user's request.
NOTE: There were 334905 observations read from the data set WORK.MELAN_R.
NOTE: The data set CONV.MELAN_R has 334905 observations and 106 variables.
NOTE: PROCEDURE COPY used (Total process time):
      real time           0.32 seconds
      cpu time            0.32 seconds


39180   ** quick checks on the conv.melan file;
39181   ** especially for the seer ICD-O-3 codes;
39182   ** melanoma code is 25010, seergroup=18 skin cancer;
39183   ** check to see if the melanoma was coded correctly;
39184   proc freq data=conv.melan_r;
39185       title 'check cancer sites';
39186       table cancer_siterec3*sex;
39187       table cancer_siterec3*cancer_seergroup /nopercent norow nocol;
39188   run;

NOTE: There were 334905 observations read from the data set CONV.MELAN_R.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           1.07 seconds
      cpu time            0.60 seconds


39189
39190   **** Exclusions risk macro;
39191   %include
39191 ! 'C:\REB\AARP_HRTandMelanoma\Analysis\anchovy\exclusions.first.primary.risk.macro.sas';
39412
39413   **** Outbox macro for use with outliers;
39414   %include 'C:\REB\AARP_HRTandMelanoma\Analysis\anchovy\outbox.macro.sas';
40143
40144   **** Use the exclusion macro to make "standard" exclusions and get counts of excluded
40144 ! subjects;
40145
40146   %exclude(data               = conv.melan_r,
40147            ex_proxy           = 1,
40148            ex_rf_proxy        = 1,
40149            ex_sex             = 0,
40150            ex_rf_selfbreast   = 1,
40151            ex_rf_selfovary    = 1,
40152            ex_selfother       = 1,
40153            ex_health          = ,
40154            ex_prevcan         = 1,
40155            ex_deathcan        = 1);
NOTE: Format EXFLAGF is already on the library.
NOTE: Format EXFLAGF has been output.

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds



NOTE: There were 334905 observations read from the data set CONV.MELAN_R.
NOTE: The data set CONV.MELAN_R has 126923 observations and 107 variables.
NOTE: The data set WORK.EXCLUSIONS has 207982 observations and 107 variables.
NOTE: DATA statement used (Total process time):
      real time           0.68 seconds
      cpu time            0.67 seconds



NOTE: There were 207982 observations read from the data set WORK.EXCLUSIONS.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.63 seconds
      cpu time            0.07 seconds



NOTE: There were 207982 observations read from the data set WORK.EXCLUSIONS.
NOTE: The data set WORK.EXCLUSIONS has 207982 observations and 107 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.29 seconds
      cpu time            0.39 seconds



NOTE: No observations were selected from data set WORK.EXCLUSIONS.
NOTE: There were 0 observations read from the data set WORK.EXCLUSIONS.
      WHERE ex_flag=14;
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds


40156
40157   /***************************************************************************************/
40158   /*   Exclude if low or high caloric consumption                                        */
40159   /***************************************************************************************/
40160   * Define outliers for total energy;
40161   %outbox(data     = conv.melan_r,
40162           id       = westatid,
40163           by       = ,
40164           comb_by  = ,
40165           var      = calories,
40166           cutoff1  = 3,
40167           cutoff2  = 2,
40168           keepzero = N,
40169           lambzero = Y,
40170           print    = N,
40171           step     = 0.01,
40172           addlog   = 0);

NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds



NOTE: There were 126923 observations read from the data set CONV.MELAN_R.
NOTE: The data set CONV.MELAN_R has 126923 observations and 107 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.26 seconds
      cpu time            0.28 seconds



NOTE: There were 126923 observations read from the data set CONV.MELAN_R.
NOTE: The data set WORK._DATA0 has 126923 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.08 seconds
      cpu time            0.09 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: The data set WORK._OUTMEANS has 1 observations and 4 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.93 seconds
      cpu time            0.12 seconds



NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._OUTMEANS has 1 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds



NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._OUTMEANS2 has 2 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds



NOTE: There were 2 observations read from the data set WORK._OUTMEANS2.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.30 seconds
      cpu time            0.04 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._NOUT has 2393 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds



NOTE: There were 2393 observations read from the data set WORK._NOUT.
NOTE: The data set WORK._NOUT has 2393 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds


NOTE: Format TYPE_OUT is already on the library.
NOTE: Format TYPE_OUT has been output.

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds



NOTE: There were 2393 observations read from the data set WORK._NOUT.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.24 seconds
      cpu time            0.01 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._DATA0 has 126923 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: The data set WORK._BOXCOX has 126923 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds



NOTE: The data set WORK._SW has 1 observations and 5 variables.
NOTE: PROCEDURE UNIVARIATE used (Total process time):
      real time           0.39 seconds
      cpu time            0.09 seconds



NOTE: There were 1 observations read from the data set WORK._SW.
NOTE: The data set WORK._ALLSW has 1 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds



NOTE: There were 101 observations read from the data set WORK._ALLSW.
NOTE: The data set WORK._ALLSW has 101 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds



NOTE: The data set WORK._MAXSW has 1 observations and 2 variables.
NOTE: PROCEDURE UNIVARIATE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds



NOTE: There were 101 observations read from the data set WORK._ALLSW.
NOTE: There were 1 observations read from the data set WORK._MAXSW.
NOTE: The data set WORK.LAMBDAS has 1 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds



NOTE: There were 1 observations read from the data set WORK.LAMBDAS.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: There were 1 observations read from the data set WORK.LAMBDAS.
NOTE: The data set WORK._DATA0 has 126923 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: There were 1 observations read from the data set WORK.LAMBDAS.
NOTE: The data set WORK._DATA0 has 126923 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: The data set WORK._DATA0 has 126923 observations and 12 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: The data set WORK._OUTMEANS has 1 observations and 5 variables.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds



NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._OUTMEANS has 1 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds



NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._OUTMEANS2 has 2 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds



NOTE: There were 2 observations read from the data set WORK._OUTMEANS2.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._NOUT has 2113 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds



NOTE: There were 2113 observations read from the data set WORK._NOUT.
NOTE: The data set WORK._NOUT has 2113 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds


NOTE: Format TYPE_OUT is already on the library.
NOTE: Format TYPE_OUT has been output.

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds



NOTE: There were 2113 observations read from the data set WORK._NOUT.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds



NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: There were 1 observations read from the data set WORK._OUTMEANS.
NOTE: The data set WORK._DATA0 has 126923 observations and 11 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds



NOTE: There were 126923 observations read from the data set CONV.MELAN_R.
NOTE: There were 126923 observations read from the data set WORK._DATA0.
NOTE: The data set CONV.MELAN_R has 126923 observations and 110 variables.
NOTE: DATA statement used (Total process time):
      real time           0.24 seconds
      cpu time            0.23 seconds


40173
40174   data conv.melan_r excl_kcal;
40175      set conv.melan_r;
40176      if noout_calories <= .z  then output excl_kcal;
40177      else output conv.melan_r;
40178   run;

NOTE: There were 126923 observations read from the data set CONV.MELAN_R.
NOTE: The data set CONV.MELAN_R has 125868 observations and 110 variables.
NOTE: The data set WORK.EXCL_KCAL has 1055 observations and 110 variables.
NOTE: DATA statement used (Total process time):
      real time           0.19 seconds
      cpu time            0.18 seconds


40179   /***************************************************************************************/
40180   /*   Exclude if person-years = 0                                                       */
40181   /***************************************************************************************/
40182   data conv.melan_r excl_py_zero;
40183      set conv.melan_r;
40184      if rf_personyrs <= 0 then output excl_py_zero;
40185      else output conv.melan_r;
40186   run;

NOTE: There were 125868 observations read from the data set CONV.MELAN_R.
NOTE: The data set CONV.MELAN_R has 125861 observations and 110 variables.
NOTE: The data set WORK.EXCL_PY_ZERO has 7 observations and 110 variables.
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds


40187
40188   ** find the cutoffs for the percentiles of UVR- exposure_jul_78_05 mped_a_bev;
40189   proc univariate data=conv.melan_r;
40190       var /*F_DOB; mped_a_bev; exposure_jul_78_05;*/ F_DOB;
40191       output  out=sauron
40192               pctlpts= 10 20 25 30 40 50 60 70 75 80 90
40193               pctlpre=p;
40194   run;

NOTE: The data set WORK.SAURON has 1 observations and 11 variables.
NOTE: PROCEDURE UNIVARIATE used (Total process time):
      real time           0.67 seconds
      cpu time            0.14 seconds


40195   proc print data=sauron;
40196       *title 'UVR exposure percentiles';
40197       title 'DOB exposure percentiles';
40198   run;

NOTE: There were 1 observations read from the data set WORK.SAURON.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.11 seconds
      cpu time            0.01 seconds


40199       ** need to change the exposure percentiles after exclusions;
40200       ** uvr exposure;
40201       ** p10     p20     p25     p30     p40     p50     p60     p70     p75     p80    p90
40201 ! ;
40202       ** 185.266 186.255 186.255 192.716 215.622 239.642 245.151 250.621 253.731 257.14
40202 ! 267.431 ;
40203       ** birth cohort;
40204       ** p10     p20     p25     p30     p40     p50     p60     p70     p75     p80   p90 ;
40205       ** -11897  -11330  -11040  -10760  -10194  -9583   -8920   -8203   -7834   -7431 -6408
40205 ! ;
40206
40207   /*****************************************************************************************
40207 ! */
40208   ** create the UVR, and confounder variables by quintile/categories;
40209   ** for both baseline and riskfactor questionnaire variables;
40210   /* cat=categorical
40210 ! ************************************************************************/
40211   data conv.melan_r;
40212       set conv.melan_r;
40213
40214   /* for baseline */
40215
40216       ** UVR TOMS quintile;
40217       UVRQ=.;
40218       if      0       < exposure_jul_78_05 <= 186.255 then UVRQ=1;
40219       else if 186.255 < exposure_jul_78_05 <= 215.622 then UVRQ=2;
40220       else if 215.622 < exposure_jul_78_05 <= 245.151 then UVRQ=3;
40221       else if 245.151 < exposure_jul_78_05 <= 257.14  then UVRQ=4;
40222       else if 257.14  < exposure_jul_78_05            then UVRQ=5;
40223       else UVRQ=-9;
40224
40225       ** birth cohort date of birth quintile;
40226       birth_cohort=.;
40227       if      -12571 <= F_DOB <= -11330 then birth_cohort=1;
40228       else if -11330 <= F_DOB < -10194  then birth_cohort=2;
40229       else if -10194 <= F_DOB < -8920   then birth_cohort=3;
40230       else if -8920  <= F_DOB < -7431   then birth_cohort=4;
40231       else if -7431  <= F_DOB           then birth_cohort=5;
40232
40233       ** physical exercise cat;
40234       physic_c=.;
40235       if      physic in (0,1) then physic_c=0; /* rarely */
40236       else if physic=2        then physic_c=1; /* 1-3 per month */
40237       else if physic=3        then physic_c=2; /* 1-2 per week */
40238       else if physic=4        then physic_c=3; /* 3-4 per week */
40239       else if physic=5        then physic_c=4; /* 5+ per week */
40240       else if physic=9        then physic_c=-9; /* missing */
40241
40242       ** physical exercise ages 15..18 cat;
40243       physic_1518_c=.;
40244       if      physic_1518 in (0,1)    then physic_1518_c=0; /* rarely */
40245       else if physic_1518=2           then physic_1518_c=1; /* 1-3 per month */
40246       else if physic_1518=3           then physic_1518_c=2; /* 1-2 per week */
40247       else if physic_1518=4           then physic_1518_c=3; /* 3-4 per week */
40248       else if physic_1518=5           then physic_1518_c=4; /* 5+ per week */
40249       else if physic_1518=9           then physic_1518_c=-9; /* missing */
40250
40251       ** oral contraceptive duration cat;
40252       oralbc_dur_c=.;
40253       if      oralbc_yrs=0        then oralbc_dur_c=0; /* none */
40254       else if oralbc_yrs=1        then oralbc_dur_c=1; /* 1-4 years */
40255       else if oralbc_yrs=2        then oralbc_dur_c=2; /* 5-9 years */
40256       else if oralbc_yrs=3        then oralbc_dur_c=3; /* 10+ years */
40257       else if oralbc_yrs in (8,9) then oralbc_dur_c=-9; /* missing */
40258
40259       ** oral contraceptive yes/no;
40260       oralbc_yn_c=.;
40261       if      oralbc_yrs=0    then oralbc_yn_c=0; /* no oc */
40262       else if 0<oralbc_yrs<8  then oralbc_yn_c=1; /* yes oc */
40263       else if oralbc_yrs>7    then oralbc_yn_c=-9; /* missing */
40264
40265       ** age at menarche cat;
40266       menarche_c=.;
40267       if      fmenstr=1   then menarche_c=0; /* <=10 years old */
40268       else if fmenstr=2   then menarche_c=1; /* 11-12 years old */
40269       else if fmenstr=3   then menarche_c=2; /* 13-14 years old */
40270       else if fmenstr=4   then menarche_c=3; /* 15+ years old */
40271       else if fmenstr>4   then menarche_c=-9; /* missing */
40272
40273       ** age at menarche cat;
40274       menarche_old_c=.;
40275       if      menarche_c in (0,1)     then menarche_old_c=0; /* <=12 years old */
40276       else if menarche_c in (2,3)     then menarche_old_c=1; /* >=13 years old */
40277       else if menarche_c=-9           then menarche_old_c=-9; /* missing */
40278
40279       ** education cat;
40280       educ_c=.;
40281       if      educm in (1,2)  then educ_c=0; /* highschool or less */
40282       else if educm in (3,4)  then educ_c=1; /* some college */
40283       else if educm=5         then educ_c=2; /* college and grad */
40284       else if educm=9         then educ_c=-9; /* missing */
40285
40286       ** race cat;
40287       race_c=.;
40288       if      racem=1         then race_c=0; /* non hispanic white */
40289       else if racem=2         then race_c=1; /* non hispanic black */
40290       else if racem in (3,4)  then race_c=2; /* hispanic, asian PI AIAN */
40291       else if racem=9         then race_c=-9; /* missing */
40292
40293       ** age at first live birth cat;
40294       flb_age_c=.;
40295       if      age_flb=0           then flb_age_c=0; /* no births */
40296       else if age_flb in (1,2)    then flb_age_c=1; /* < 20 years old */
40297       else if age_flb in (3,4)    then flb_age_c=2; /* 20s */
40298       else if age_flb in (5,6,7)  then flb_age_c=3; /* 30s */
40299       else if age_flb in (8,9)    then flb_age_c=-9; /* missing */
40300
40301   ******************************************************************************************
40301 ! *;
40302   /** recode menopause status to include hysterectomy and oophorectomy **/
40303   ******************************************************************************************
40303 ! *;
40304       ** menopause status recoded;
40305       ** use the perstop_surgery (hyststat and ovarystat) and perstop_radchem;
40306
40307       menostat_c=.;
40308       if      perstop_nostop=1                                then menostat_c=0; /*
40308 ! premenopausal */
40309       else if perstop_menop=1                                 then menostat_c=1; /* natural
40309 ! menopause */
40310       else if perstop_surg=1 & (hyststat=1 & ovarystat=1)     then menostat_c=2; /*
40310 ! hysterectomy, removed 2 ovaries */
40311       else if perstop_surg=1 & (hyststat=1 & ovarystat=3)     then menostat_c=3; /*
40311 ! hysterectomy, surgery to ovaries */
40312       else if perstop_surg=1 & (hyststat=1 & ovarystat=2)     then menostat_c=4; /*
40312 ! hysterectomy, ovaries intact */
40313       else if perstop_surg=1 & (hyststat=1 & ovarystat=9)     then menostat_c=5; /*
40313 ! hysterectomy, ovaries unknown */
40314       else if perstop_menop=0 | (perstop_surg=9 | perstop_radchem in (0,1,9))
40315                                                               then menostat_c=6; /* other
40315 ! reason */
40316       else if perstop_nostop=9 | perstop_menop=9              then menostat_c=-9; /* missing
40316 !  */
40317
40318       ** for natural menopause age;
40319       meno_age_c=.;
40320       if      menostat_c=1 & menop_age=4          then meno_age_c=0; /* 50-54 */
40321       else if menostat_c=1 & menop_age in (1,2)   then meno_age_c=1; /* less than 45 */
40322       else if menostat_c=1 & menop_age=3          then meno_age_c=2; /* 45-49 */
40323       else if menostat_c=1 & menop_age=5          then meno_age_c=3; /* 55+ */
40324       else if menostat_c=1 & menop_age in (8,9)   then meno_age_c=-9; /* missing */
40325       else    meno_age_c=-9;
40326
40327       ** hysterectomy age cat;
40328       hyst_age_c=.;
40329       if      menostat_c in (2,3,4,5) & menop_age in (1,2)        then hyst_age_c=0; /* less
40329 !  than 45 */
40330       else if menostat_c in (2,3,4,5) & menop_age=3               then hyst_age_c=1; /*
40330 ! 45-49 */
40331       else if menostat_c in (2,3,4,5) & menop_age=4               then hyst_age_c=2; /*
40331 ! 50-54 */
40332       else if menostat_c in (2,3,4,5) & menop_age=5               then hyst_age_c=3; /* 55+
40332 ! */
40333       else if menostat_c in (2,3,4,5) & menop_age in (8,9)        then hyst_age_c=-9; /*
40333 ! missing */
40334       else    hyst_age_c=-9;
40335
40336       ** former smoker status cat;
40337       smoke_f_c=.;
40338       if      bf_smoke_former=0   then smoke_f_c=0; /* never smoke */
40339       else if bf_smoke_former=1   then smoke_f_c=1; /* former smoker (ever)*/
40340       else if bf_smoke_former=2   then smoke_f_c=1; /* current smoker? (ever)*/
40341       else if bf_smoke_former=9   then smoke_f_c=-9; /* missing */
40342       else smoke_f_c=-9;
40343
40344       ** hormonal status cat;
40345       horm_c=.;
40346       if      hormstat=0          then horm_c=0; /* never hormones */
40347       else if hormstat=1          then horm_c=1; /* former */
40348       else if hormstat=2          then horm_c=2; /* current */
40349       else if hormstat in (8,9)   then horm_c=-9; /* missing */
40350
40351       ** live child parity cat;
40352       parity=.;
40353       if livechild=0                  then parity=0; /* no live children */
40354       else if livechild in (1,2)      then parity=1; /* 1 to 2 live children */
40355       else if livechild in (3,4,5)    then parity=2; /* 3 to 5+ live children */
40356       else if livechild in (8,9)      then parity=-9; /* missing */
40357
40358       ** cancer grade cat;
40359       cancer_g_c=.;
40360       if      cancer_grade=1      then cancer_g_c=0;
40361       else if cancer_grade=2      then cancer_g_c=1;
40362       else if cancer_grade=3      then cancer_g_c=2;
40363       else if cancer_grade=4      then cancer_g_c=3;
40364       else if cancer_grade=9      then cancer_g_c=-9; /* missing */
40365
40366       **************************************************************************************
40366 ! *****;
40367       ** bmi categories
40367 ! *************************************************************************;
40368       **************************************************************************************
40368 ! *****;
40369       ** bmi three categories;
40370       if      18.5<=bmi_cur<25    then bmi_c=1; /* low bmi */
40371       else if 25<=bmi_cur<30      then bmi_c=2; /* higher bmi */
40372       else if 30<=bmi_cur<50      then bmi_c=3; /* highest bmi */
40373       else if bmi_cur=.           then bmi_c=-9; /* missing */
40374       else if bmi_cur<18.5        then bmi_c=-9; /* less than lowest valid bmi */
40375       else if bmi_cur<=50         then bmi_c=-9; /* more than highest valid bmi */
40376
40377       ** bmi three categories standalone variables;
40378       bmi_c1=0;
40379       bmi_c2=0;
40380       bmi_c3=0;
40381       bmi_cn9=0;
40382
40383       if      bmi_c=1     then bmi_c1=1;
40384       else if bmi_c=2     then bmi_c2=1;
40385       else if bmi_c=3     then bmi_c3=1;
40386       else if bmi_c=-9    then bmi_cn9=1;
40387
40388       ** bmi five categories;
40389       if      18.5<=bmi_cur<25    then bmi_fc=1; /* low bmi */
40390       else if 25<=bmi_cur<30      then bmi_fc=2; /* mid bmi */
40391       else if 30<=bmi_cur<35      then bmi_fc=3; /* high bmi */
40392       else if 35<=bmi_cur<40      then bmi_fc=4; /* higher bmi */
40393       else if bmi_cur>=40         then bmi_fc=5; /* highest valid bmi */
40394       else bmi_fc=-9;
40395
40396       ** bmi five categories standalone variables;
40397       bmi_fc1=0;
40398       bmi_fc2=0;
40399       bmi_fc3=0;
40400       bmi_fc4=0;
40401       bmi_fc5=0;
40402
40403       if      bmi_fc=1    then bmi_fc1=1;
40404       else if bmi_fc=2    then bmi_fc2=1;
40405       else if bmi_fc=3    then bmi_fc3=1;
40406       else if bmi_fc=4    then bmi_fc4=1;
40407       else if bmi_fc=5    then bmi_fc5=1;
40408
40409       ** continuous bmi;
40410       bmi_cont=bmi_cur/5;
40411
40412       * finish bmi;
40413       ***************************************************************************;
40414
40415       ** first primary cancer stage;
40416       stage_c=.;
40417       if      cancer_ss_stg=0                 then stage_c=0;
40418       else if cancer_ss_stg=1                 then stage_c=1;
40419       else if cancer_ss_stg in (2,3,4,5)      then stage_c=2;
40420       else if cancer_ss_stg=7                 then stage_c=3;
40421       else if cancer_ss_stg in (8,9)          then stage_c=4;
40422       else if cancer_ss_stg=.                 then stage_c=-9;
40423
40424       ** total alcohol per day;
40425       etoh_c=.;
40426       if mped_a_bev=0                 then etoh_c=0;      /* none */
40427       else if 0<mped_a_bev<=0.04      then etoh_c=1;      /* 0-0.04 */
40428       else if 0.04<mped_a_bev<=0.1    then etoh_c=2;      /* 0.04-0.1 */
40429       else if 0.1< mped_a_bev<=0.52   then etoh_c=3;      /* 0.1-0.52 */
40430       else if 0.52<mped_a_bev<=1.12   then etoh_c=4;      /* 0.52-1.12 */
40431       else if      mped_a_bev>1.12    then etoh_c=5;      /* 1.12-37.44 */
40432       else         etoh_c=-9;                             /* missing */
40433
40434   /* for riskfactor */
40435
40436       ** risk physical exercise ages 15..18 cat;
40437       rphysic_1518_c=.;
40438       if      rf_phys_modvig_15_18 in (0,1)   then rf_physic_1518_c=0; /* rarely */
40439       else if rf_phys_modvig_15_18=2          then rf_physic_1518_c=1; /* <1 hour/week */
40440       else if rf_phys_modvig_15_18=3          then rf_physic_1518_c=2; /* 1-3 hours/week */
40441       else if rf_phys_modvig_15_18=4          then rf_physic_1518_c=3; /* 4-7 hours/week */
40442       else if rf_phys_modvig_15_18=5          then rf_physic_1518_c=4; /* >7 hours/week */
40443       else if rf_phys_modvig_15_18=9          then rf_physic_1518_c=-9; /* missing */
40444       else rphysic_1518=-9;
40445
40446       ** (rf) physical exercise how often participate mod-vig activites in past 10 years;
40447       rf_physic_c=.;
40448       if      rf_phys_modvig_curr in (0,1)    then rf_physic_c=0; /* none-rarely */
40449       else if rf_phys_modvig_curr=2           then rf_physic_c=1; /* <1 hr/week */
40450       else if rf_phys_modvig_curr=3           then rf_physic_c=2; /* 1-3 hr/week */
40451       else if rf_phys_modvig_curr=4           then rf_physic_c=3; /* 4-7 hr/week */
40452       else if rf_phys_modvig_curr=5           then rf_physic_c=4; /* >7 hr/week */
40453       else if rf_phys_modvig_curr=9           then rf_physic_c=-9; /* missing */
40454       else rf_physic_c=-9;
40455
40456       **************************************************************************************
40456 ! *****;
40457       *************** HRT variables
40457 ! *************************************************************;
40458       **************************************************************************************
40458 ! *****;
40459
40460       ** Estrogen ***************;
40461
40462
40463       ** Progestin **************;
40464
40465
40466       ** both EP ****************;
40467
40468
40469
40470
40471       ** finished HRT variables;
40472       **************************************************************************************
40472 ! *****;
40473   run;

NOTE: Character values have been converted to numeric values at the places given by:
      (Line):(Column).
      40360:13   40361:13   40362:13   40363:13   40364:13   40417:13   40418:13   40419:13
      40420:13   40421:13   40422:13
NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      3457 at 40410:21
NOTE: There were 125861 observations read from the data set CONV.MELAN_R.
NOTE: The data set CONV.MELAN_R has 125861 observations and 146 variables.
NOTE: DATA statement used (Total process time):
      real time           0.51 seconds
      cpu time            0.49 seconds


40474
40475   ods html close;
40476   ods html;
NOTE: Writing HTML Body file: sashtml139.htm
40477   proc freq data=conv.melan_r;
40478       title 'check menopause status table';
40479       table menostat_c;
40480   run;

NOTE: There were 125861 observations read from the data set CONV.MELAN_R.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.27 seconds
      cpu time            0.09 seconds


40481   ** add labels;
40482   proc datasets library=conv;
40483       modify melan_r;
40484
40485       ** set variable labels;
40486       label   /* melanoma outcomes */
40487               melanoma_agg = "Melanoma indicator"
40488               melanoma_c = "Melanoma indicator by type"
40489
40490               /* for baseline */
40491               uvrq = "TOMS AVGLO-UVR measures in quintiles"
40492               oralbc_dur_c = "birth control duration"
40493               oralbc_yn_c = "birth control yes/no"
40494               menarche_old_c = "menarche 2 split"
40495               menarche_c = "menarche age"
40496               educ_c = "education level"
40497               race_c = "race split into 3"
40498               flb_age_c = "Age at first live birth among parous women"
40499               fmenstr = "Age at menarche"
40500               menostat_c = "menopause status"
40501               meno_age_c ="age at natural menopause"
40502               hyst_age_c ="age at hysterectomy"
40503               menostat_c ="menopause status"
40504               physic_c = "level of physical activity"
40505               horm_c = "hormone usage status"
40506               parity = "total number of live births"
40507               cancer_g_c = "cancer grade"
40508               bmi_c = "bmi, rough"
40509               bmi_fc = "bmi, 5"
40510               stage_c = "stage of first primary cancer"
40511               physic_1518_c = "level of physical activity at ages 15-18 (base)"
40512
40513               smoke_f_c = "ever smoking status"
40514               smoke_former ="Smoking Status"
40515               smoke_quit = 'Quit smoking status'
40516               smoke_dose = 'Smoking dose'
40517               smoke_quit_dose = 'Smoking status and dose combined'
40518               rel_1d_cancer = 'Family History of Cancer'
40519               coffee_c = 'Coffee drinking'
40520               etoh_c = 'Total alchohol per day including food sources'
40521
40522               /* for riskfactor */
40523               rf_physic_1518_c = "level of physical activity at ages 15-18 (rf)"
40524               rf_physic_c = "Times engaged in moderate-vigorous physical activity"
40525               rf_1d_cancer = "Family History of Cancer"
40526       ;
40527       ** set variable value labels;
40528       format  /* for outcomes */
40529               melanoma_c melanfmt. melanoma_agg melanomafmt.
40530
40531               /* for baseline*/
40532               uvrq uvrqfmt. oralbc_dur_c oralbcdurfmt. educ_c educfmt. race_c racefmt.
40533               flb_age_c flbagefmt. fmenstr fmenstrfmt. meno_age_c menoagefmt. menostat_c
40533 ! menostatfmt. hyst_age_c hystagefmt.
40534               physic_c physic_1518_c physicfmt. smoke_f_c smokingfmt. horm_c hormstatfmt.
40534 ! parity parityfmt.
40535               bmi_fc bmifmt. PERSTOP_SURG hysterectomyfmt. agecat agecatfmt.
40536               smoke_former smokeformerfmt. smoke_quit smokequitfmt. smoke_dose smokedosefmt.
40537               smoke_quit_dose smokequitdosefmt.
40538               rel_1d_cancer relativefmt. coffee_c coffeefmt. etoh_c etohfmt.
40539
40540               /* for riskfactor */
40541               rf_physic_1518_c rfphysicfmt. rf_physic_c rfphysicfmt. rf_1d_cancer
40541 ! relativefmt.
40542       ;
40543   run;

NOTE: MODIFY was successful for CONV.MELAN_R.DATA.
40544   /*****************************************************************************************
40544 ! */
40545   ods html close;
40546   ods html;
NOTE: Writing HTML Body file: sashtml140.htm
40547   ** check the contents of the created melan other;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.98 seconds
      cpu time            0.37 seconds


40548   proc contents data=conv.melan_r;
40549       title 'melanoma risk content';
40550   run;

NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds


40551
40552   ** check that the melanoma cases were properly created;
40553   proc freq data=conv.melan_r;
40554       title 'melanoma frequencies risk';
40555       table cancer_siterec3*melanoma_c /nopercent norow nocol;
40556       table cancer_seergroup /nopercent norow nocol;
40557       table agecat UVRQ birth_cohort UVRQ*birth_cohort UVRQ*agecat /nopercent norow;
40558       table melanoma_c*sex /nopercent norow; * verify only females;
40559   run;

NOTE: There were 125861 observations read from the data set CONV.MELAN_R.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.18 seconds
      cpu time            0.18 seconds


40560
40561   ** check the repro and hormone vars ;
40562   proc freq data=conv.melan_r;
40563       title 'hormone frequencies';
40564       *table DAUGH_ESTONLY_CALC_MO_2002 DAUGH_ESTPRG_CALC_MO_2002 DAUGH_EST_CALC_MO_2002
40564 ! DAUGH_PRGONLY_CALC_MO_2002 DAUGH_PRG_CALC_MO_2002;
40565       table FMENSTR HORMEVER*HORMSTAT melanoma_c*HORM_CUR melanoma_c*HORMSTAT HORM_YRS;
40566   run;

NOTE: There were 125861 observations read from the data set CONV.MELAN_R.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.12 seconds
      cpu time            0.12 seconds


40567
40568   ** check coffee and alcohol variables;
40569   ods html close;
40570   ods html;
NOTE: Writing HTML Body file: sashtml141.htm
40571   proc freq data=conv.melan_r;
40572       title 'coffee, alchohol, meno_age, hyst_age';
40573       table coffee_c etoh_c meno_age_c hyst_age_c;
40574   run;

NOTE: There were 125861 observations read from the data set CONV.MELAN_R.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.10 seconds
      cpu time            0.09 seconds


40575   ods html close;
40576   /*****************************************************
40577   #
40578   #
40579   proc phreg data=conv.melan_r;
40580       title 'melanoma HR with UVR quintiles';
40581       class agecat(ref='1') UVRQ(ref='1');
40582       model (entry_age, exit_age)*melan_case(0) = agecat UVRQ /rl;
40583
40584   run;
40585   *****************************************************/

